<!DOCTYPE html>
<meta charset="utf-8">
<title>TD3-s6.html</title>
<link rel="stylesheet" type="text/css" href="style.css"/>

<h1>Régularité des TER</h1>

<div>
<label><span>Région :</span><input id="region" name="Region"></label>
<label><span> </span><button id="bouton">Afficher la courbe</button></label>
</div>
<p />
<div id="reponse">
  <p></p>
  <img alt="" src="" />
</div>

<script>
document.getElementById('bouton').addEventListener('click', envoiformulaire);

function envoiformulaire(e) {
	var image =  document.querySelector('#reponse img');
    var legende = document.querySelector('#reponse p');
    var reg = document.getElementById('region').value;
    var xhr = new XMLHttpRequest();
	xhr.onload = function() {   // fonction callback
        var data = JSON.parse(this.responseText)
        image.src = data.img;
        image.alt = data.title;
        legende.innerHTML = data.title;
        };
    xhr.open('GET','/ponctualite/'+reg,true);  // requête au serveur
    xhr.send();
}
</script>


